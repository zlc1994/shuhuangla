{% extends "base.html" %}
{% import "_macros.html" as macros %}

{% block content %}
<div class="columns">
    <div class="column is-one-fifths"></div>
    <div class="column is-one-fifths">
            <div class="box">
                {% if current_user.is_authenticated %}
                <div class="media">
                    <figure class="media-left">
                        <img src="{{ current_user.get_avatar(48) }}">
                    </figure>
                    <div class="media-content">
                        <strong>{{ current_user.username }}</strong>
                    </div>
                </div>
                <nav class="level is-mobile">
                    <div class="level-item has-text-centered">
                        <div>
                        <p class="heading">评论</p>
                        <a class="title" href="{{ url_for('user', username=current_user.username) }}">{{ current_user.comments.count() }}</a>
                        </div>
                    </div>
                    <div class="level-item has-text-centered">
                        <div>
                        <p class="heading">关注</p>
                        <a class="title" href="{{ url_for('followed', username=current_user.username) }}">{{ current_user.followed.count() }}</a>
                        </div>
                    </div>
                    <div class="level-item has-text-centered">
                        <div>
                        <p class="heading">粉丝</p>
                        <a class="title" href="{{ url_for('followers', username=current_user.username) }}">{{ current_user.followers.count() }}</a>
                        </div>
                    </div>
                </nav>
                {% else %}
                <div class="has-text-centered">
                <p class="is-large">书荒啦——推荐你喜欢的小说</p>
                <p><a class="button" href="{{ url_for('register') }}">注册</a></p>
                <p class="is-small">已注册用户？<a href="{{ url_for('login') }}">登入</a></p>
                </div>
                {% endif %}
            </div>
        </div>
    <div class="column is-two-fifths">
        {% include "_comments.html" %}
        {{ macros.pagination_widget(pagination, 'index') }}
    </div>
    <div class="column is-one-fifths"></div>
</div>
{% endblock %}